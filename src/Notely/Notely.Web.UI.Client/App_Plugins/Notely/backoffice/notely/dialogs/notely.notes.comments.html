<div ng-controller="Notely.Notes.CommentsController" ng-init="init(dialogData)" class="notely-dialog umb-modalcolumn">

    <div class="umb-modalcolumn-header">
        <h1>Comments</h1>
    </div>

    <div class="umb-modalcolumn-body">
        <div class="umb-dialog umb-pane">
            <div class="umb-dialog-body">

                <p>Show the comments history for note <strong>{{model.note.title}}</strong>.</p>

                <div class="notely-comments" ng-show="model.note.comments.length > 0">
                    <div class="notely-comments_item" ng-repeat="comment in model.note.comments">
                        <a href ng-click="deleteComment(model.note.id, comment.id)"
                           class="notely-delete" ng-if="comment.logType === 'Info' && comment.user.id == currentUser.id">
                            <i class="icon icon-delete"></i>
                        </a>
                        <div class="notely-comment_img">
                            <img ng-src="{{comment.user.avatarUrl}}">
                        </div>
                        <div class="notely-comment_body">
                            <span>{{comment.datestamp | date : 'dd MMM yyyy HH:mm:ss'}}</span>
                            <p ng-bind-html-unsafe="renderDescription(comment)"></p>
                        </div>
                    </div>
                </div>

            </div>
            <div class="umb-dialog-footer btn-toolbar umb-btn-toolbar">
                <input type="text" class="umb-editor" placeholder="Add comment"
                       ng-model="newcomment" ng-keypress="($event.which === 13) ? addComment() : 0" />
                <a class="btn btn-link" ng-click="close()">
                    Close
                </a>
                <button class="btn btn-primary" ng-click="addComment()">
                    Save
                </button>
            </div>
        </div>

    </div>

</div>
